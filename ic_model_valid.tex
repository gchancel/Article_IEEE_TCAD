% !TeX spellcheck = en_US
% !TeX root = ./0_article.tex

\section{Validating and completing the models}
\subsection{Validation the models}
	With the aim of verifying the soundness of the previous conclusions, we set up experiments using an actual IC composed of both triple-well and dual-well substrate on a monolithic die.
	These experiments consist in verifying if the difference in injected energy depending on the substrate type is actually significant or not.

	The target used is a STM32F439 microcontroller, alongside the platform presented in the first chapter.
	The IC die measures approximately 5.5 mm \texttimes\ 4.5 mm.
	We call these experiments "IC ground current mapping", and quite naturally, they consist in measuring in specific conditions the current at the target circuit external ground connection.
	The entirety of the IC is mapped, and a voltage pulse is injected at each location.
	Then, we measure the current at the circuit ground and calculate its RMS value to represent it into a two-dimensional cartography.
	\input{./figures/stmphoto.tex}
	Knowing the coarse structure of the considered IC, in addition to having insights on the substrate type, we could draw the coarse structure picture shown in Fig. \ref{stm_ir_photo}.
	The "glue logic" regions are known to be made with triple-well substrates, while the "flash control" and "analog" regions are made with dual-well substrates.
	\textcolor{orange}{The memories, however, are made of a mix of both.}
	\input{./figures/stmignd.tex}
	The experimental results are shown in Fig. \ref{stm_ignd}, and the experimental parameters are the following:
	\begin{itemize}
		\item Negative voltage pulse of 70 V amplitude;
		\item Pulse width of 20 ns;
		\item IC substrate thickness of 50 \textmu m.
	\end{itemize}
	The voltage pulse used is of negative polarity as we have observed a very fast degradation of IC subjected to positive voltage pulses, therefore we decided to avoid them at all cost.
	When analyzing the results, we can notice significant differences in the measured current depending on various regions, and the IC floorplan seems to draw itself on the current map.
	The measured RMS current ranges from 10 mArms to 140 mArms, and as predicted by the simulation results, in the regions where the substrate is of dual-well type, the current is higher than on regions where the substrate is of triple-well type, such as the analog block or the flash control region.

	These observations confirm the soundness of the proposed models.
	However, as we have seen previously, these models do not consider the functional nature of the considered ICs: their logic behavior.
	To circumvent this limitation, we decided to develop an addition to the initial simulation flow, thus the name "hybrid simulation flow".

\subsection{Completing the models}
	As we have stated previously, it is required, to complete the models, to properly consider the logical behavior of the considered circuits, which allows for a better appreciation of BBI induced effects and their consequences.
	These additional steps consist in modeling actual logic and sequential elements in the same or in a close technology as the considered IC, while extracting the significant disturbed signals from the SCS simulation and injecting them into these logic devices.
	For this purpose, split this section into two subsections:
	\begin{itemize}
		\item A first section dedicated to studying a static logic gate: the classical inverter;
		\item A second section dedicated to studying a sequential element: the DFF.
	\end{itemize}

	\subsubsection{Static inverters under BBI}
		\input{./figures/fig_ivxmos}
		Because inverters can have two stable output states, we will consider two cases for each substrate scenario: a normally high inverter (Fig. \ref{ivxbufmos}.a) and a normally low inverter (Fig. \ref{ivxbufmos}.b).
%		 as it is illustrated on the model shown in Fig. \ref{ivxbufmos}: a normally high and a normally low inverter.
		The inverters are connected to four external signals which are extracted from the previous SCS simulation:
		\begin{itemize}
				\item VDD: the power supply voltage;
				\item VSS: the power supply reference voltage;
				\item PSUB: the bulk voltage of the PMOS transistors;
				\item NSUB: the bulk voltage of the NMOS transistors.
			\end{itemize}
		The voltages PSUB and NSUB depend on the substrate type.
		On the one hand, in the dual-well scenario, NSUB is connected to the epitaxial layer, while PSUB is connected to the N-well.
		On the other hand, in the triple-well scenario, NSUB is connected to the P-well and PSUB to the N-well.

		All of this gives us four scenarios	 to study.
		For clarity and because two of the four scenario are less noteworthy, we will only talk about two of them:
		\begin{itemize}
			\item The triple-well substrate and the normally high inverter;
			\item The dual-well substrate and the normally low inverter.
		\end{itemize}
		Then, for each scenario, we will analyze seven signals of interest:
		\begin{itemize}
			\item The backside voltage pulse, for reference purposes;
			\item The local differential power supply voltage;
			\item The current sum of the inverter;
			\item The inverter load current;
			\item The inverter output;
			\item The NSUB voltage;
			\item the PSUB voltage.
		\end{itemize}
		The signals extracted from the SCS simulations come from the standard-cell located directly below the BBI probe, a.k.a the cell targeted by the injection.
		\input{./figures/invertersimu}
		Fig. \ref{ivxsimu} presents the inverter simulation results for both considered scenarios.

		First, let us focus on the dual-well inverter.
		The corresponding schematic is shown in Fig. \ref{ivxbufmos}b, and the simulation results are shown in Fig. \ref{ivxsimu}a.
		In that case, as we have seen before, the global IC coupling is resistive, with a discrepancy between VSS and VDD.
		Therefore, the inverter current sum (green) follows a DC-response, similar to the differential power delivery voltage (black).
		The inverter output follows the current sum curve, and its output goes from a low to a high logic value during 10 ns, then back to its original state.
		It is further corroborated by looking at the load current, which is charged on the first pulse edge, then discharged on the second one.

		Second, concerning the triple-well inverter, where the results are shown in Fig. \ref{ivxsimu}b and the schematic in Fig. \ref{ivxbufmos}a, the substrate is globally AC-coupled.
		It can be seen on the current sum curve, which follows almost exactly the capacitive load current curve.
		The inverter output, for its part, is discharged like the load, and goes from a high logic value to a low value during 12 ns before returning to its original value.

		These observations are of great value because we can discuss a fault model for BBI, similar to what has been studied for EMFI and LFI.
		The previous results seem to indicate that the faults created using BBI are data-dependent.
		Indeed, if we lower the voltage of an inverter outputting a low value, or the opposite, it has theoretically no direct effect on the logic value.
		However, we have seen that it is possible, depending on the substrate type, to observe bit set or reset.
		Eventually, thanks to these results and the previous ones regarding current density in the substrate in Fig. \ref{sim_res_dw_neg}, \ref{sim_res_dw_pos}, \ref{sim_res_tw_neg} and \ref{sim_res_tw_pos}, it seems that BBI effects are local.

%	For this purpose, we modeled an inverter, a buffer and a DFF.
%	The inverter and the buffer schematics, alongside their transistors sizes, are shown in Fig. \ref{ivxbufmos}.
%%	\input{./figures/fig_dffmos.tex}
%%	The complete DFF schematic is shown in Fig. \ref{dffmos}.
%
%	Each logic element is connected to four external signals:
%%	The significant extracted signals are the following:
%	\begin{itemize}
%		\item VDD: the power supply voltage;
%		\item VSS: the power supply reference voltage;
%		\item PSUB: the bulk voltage of the PMOS transistors;
%		\item NSUB: the bulk voltage of the NMOS transistors.
%	\end{itemize}
%	These are the signals which are extracted from the SCS simulations.
%	The voltages PSUB and NSUB depend on the substrate type.
%	On the one hand, in the dual-well scenario, NSUB is connected to the epitaxial layer, while PSUB is connected to the N-well.
%	On the other hand, in the triple-well scenario, NSUB is connected to the P-well and PSUB to the N-well.
%	\input{./figures/fig_dffchain.tex}
%	The resulting simulated logic circuit, combining several inverters, a buffer and a DFF, is shown in Fig. \ref{dffChain}.
%	The first ten inverters, the buffer and the DFF are disturbed thanks to the extracted signals.
%	The four last inverter are not disturbed and are powered with ideal power signals.
%	Their role is to mimic a distant logic block receiving the DFF "BBI disturbed" logic signals.
%	The simulations are performed, as previously, for both a dual-well scenario and a triple-well scenario.
%	However, and for simplicity showing the results, we did not consider the positive pulse case, as we observed high level of destructiveness on actual ICs.
%
%	Presenting such results on a logic path embedding a DFF on a digital or physical static medium is not an easy task.
%	Therefore, we have chosen some specific time during the simulation where we think the results are noteworthy.
%	However, every simulation step is useful to some extent.
%	Therefore, we provide additional simulation results in our GitHub repository dedicated to this paper (\textcolor{red}{mettre repo ?}).
