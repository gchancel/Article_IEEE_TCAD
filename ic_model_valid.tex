% !TeX spellcheck = en_US
% !TeX root = ./0_article.tex

\section{Validating and completing the models}
\subsection{Validation the models}
	With the aim of verifying the soundness of the previous conclusions, we set up experiments using an actual IC composed of both triple-well and dual-well substrate on a monolithic die.
	These experiments consist in verifying if the difference in injected energy depending on the substrate type is actually significant or not.

	The target used is a STM32F439 microcontroller, alongside the platform presented in the first chapter.
	The IC die measures approximately 5.5 mm \texttimes\ 4.5 mm.
	We call these experiments "IC ground current mapping", and quite naturally, they consist in measuring in specific conditions the current at the target circuit external ground connection.
	The entirety of the IC is mapped, and a voltage pulse is injected at each location.
	Then, we measure the current at the circuit ground and calculate its RMS value to represent it into a two-dimensional cartography.
	\input{./figures/stmphoto.tex}
	Knowing the coarse structure of the considered IC, in addition to having insights on the substrate type, we could draw the coarse structure picture shown in Fig. \ref{stm_ir_photo}.
	The "glue logic" regions are known to be made with triple-well substrates, while the "flash control" and "analog" regions are made with dual-well substrates.
	\textcolor{orange}{The memories, however, are made of a mix of both.}
	\input{./figures/stmignd.tex}
	The experimental results are shown in Fig. \ref{stm_ignd}, and the experimental parameters are the following:
	\begin{itemize}
		\item Negative voltage pulse of 70 V amplitude;
		\item Pulse width of 20 ns;
		\item IC substrate thickness of 50 \textmu m.
	\end{itemize}
	The voltage pulse used is of negative polarity as we have observed a very fast degradation of IC subjected to positive voltage pulses, therefore we decided to avoid them at all cost.
	When analyzing the results, we can notice significant differences in the measured current depending on various regions, and the IC floorplan seems to draw itself on the current map.
	The measured RMS current ranges from 10 mArms to 140 mArms, and as predicted by the simulation results, in the regions where the substrate is of dual-well type, the current is higher than on regions where the substrate is of triple-well type, such as the analog block or the flash control region.

	These observations confirm the soundness of the proposed models.
	However, as we have seen previously, these models do not consider the functional nature of the considered ICs: their logic behavior.
	To circumvent this limitation, we decided to develop an addition to the initial simulation flow, thus the name "hybrid simulation flow".

\subsection{Completing the models}
	As we have stated previously, it is required, to complete the models, to properly consider the logical behavior of the considered circuits, which allows for a better appreciation of BBI induced effects and their consequences.
	These additional steps consist in modeling actual logic and sequential elements in the same or in a close technology as the considered IC, while extracting the significant disturbed signals from the SCS simulation and injecting them into these logic devices.
	\input{./figures/fig_ivxmos}
	For this purpose, we modeled an inverter, a buffer and a DFF.
	The inverter and the buffer schematics, alongside their transistors sizes, are shown in Fig. \ref{ivxbufmos}.
%	\input{./figures/fig_dffmos.tex}
%	The complete DFF schematic is shown in Fig. \ref{dffmos}.

	Each logic element is connected to four external signals:
%	The significant extracted signals are the following:
	\begin{itemize}
		\item VDD: the power supply voltage;
		\item VSS: the power supply reference voltage;
		\item PSUB: the bulk voltage of the PMOS transistors;
		\item NSUB: the bulk voltage of the NMOS transistors.
	\end{itemize}
	These are the signals which are extracted from the SCS simulations.
	The voltages PSUB and NSUB depend on the substrate type.
	On the one hand, in the dual-well scenario, NSUB is connected to the epitaxial layer, while PSUB is connected to the N-well.
	On the other hand, in the triple-well scenario, NSUB is connected to the P-well and PSUB to the N-well.
	\input{./figures/fig_dffchain.tex}
	The resulting simulated logic circuit, combining several inverters, a buffer and a DFF, is shown in Fig. \ref{dffChain}.
	The first ten inverters, the buffer and the DFF are disturbed thanks to the extracted signals.
	The four last inverter are not disturbed and are powered with ideal power signals.
	Their role is to mimic a distant logic block receiving the DFF "BBI disturbed" logic signals.
	The simulations are performed, as previously, for both a dual-well scenario and a triple-well scenario.
	However, and for simplicity showing the results, we did not consider the positive pulse case, as we observed high level of destructiveness on actual ICs.
